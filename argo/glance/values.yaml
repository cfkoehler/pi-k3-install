glance:
  common:
    # Image configuration (defaults to v0.8.4)
    image:
      repository: glanceapp/glance
      tag: v0.8.4
      pullPolicy: IfNotPresent

    # Ingress configuration for external access via Traefik
    ingress:
      enabled: true
      hostName: glance.homelab.connortech.me
      ingressClassName: traefik
      tls:
        enabled: false  # TLS handled by nginx-proxy-manager
      annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: web

    # Resource limits for Raspberry Pi
    resources:
      limits:
        cpu: 200m
        memory: 256Mi
      requests:
        cpu: 100m
        memory: 128Mi

    # Environment variables from secrets
    variables:
      secret:
        existingSecret:
          - envName: PIHOLE_PASSWORD
            name: glance-secrets
            key: PIHOLE_PASSWORD

    # Custom dashboard configuration
    configMap:
      enabled: true
      data:
        - name: "config"
          mountPath: "/mnt"
          data:
            - content:
                glance.yml: |
                  pages:
                    - name: Startpage
                      columns:
                        - size: small
                          widgets:
                            # Perplexity AI Search
                            - type: search
                              search-engine: https://www.perplexity.ai/search?q={QUERY}
                              bangs:
                                - title: Perplexity
                                  shortcut: "!p"
                                  url: https://www.perplexity.ai/search?q={QUERY}
                                - title: Google
                                  shortcut: "!g"
                                  url: https://www.google.com/search?q={QUERY}

                            # Pi-hole DNS Statistics
                            - type: dns-stats
                              service: pihole-v6
                              url: https://pihole.homelab.connortech.me
                              password: ${PIHOLE_PASSWORD}
                              cache: 5m

                        - size: full
                          widgets:
                            # Homelab Service Monitoring
                            - type: monitor
                              cache: 1m
                              sites:
                                - title: ArgoCD
                                  url: https://argocd.homelab.connortech.me
                                  icon: si:argo
                                - title: Grafana
                                  url: https://grafana.homelab.connortech.me
                                  icon: si:grafana
                                - title: Nginx Proxy Manager
                                  url: http://192.168.1.161:81
                                  icon: si:nginx
                                - title: Uptime Kuma
                                  url: https://uptime.homelab.connortech.me
                                  icon: si:uptimekuma
                                - title: Pi-hole
                                  url: https://pihole.homelab.connortech.me
                                  icon: si:pihole
                                - title: Glance
                                  url: https://glance.homelab.connortech.me
                                  icon: si:homeassistant

                            # Uptime Kuma Detailed Monitor Status
                            - type: custom-api
                              title: Uptime Kuma Monitors
                              url: https://uptime.homelab.connortech.me/api/status-page/status
                              subrequests:
                                heartbeats:
                                  url: https://uptime.homelab.connortech.me/api/status-page/heartbeat/status
                              cache: 10m
                              template: |
                                {{ range .publicGroupList }}
                                <div class="monitor-group">
                                  <h4>{{ .name }}</h4>
                                  {{ range .monitorList }}
                                  <div class="monitor-item">
                                    <span>{{ .name }}</span>
                                    {{ $monitorId := printf "%v" .id }}
                                    {{ $monitor := index $.heartbeats $monitorId }}
                                    {{ if $monitor }}
                                    <span class="monitor-status {{ if eq $monitor.status 1 }}up{{ else }}down{{ end }}">
                                      {{ if eq $monitor.status 1 }}●{{ else }}○{{ end }}
                                    </span>
                                    {{ end }}
                                  </div>
                                  {{ end }}
                                </div>
                                {{ end }}

                        - size: small
                          widgets:
                            - type: clock
                              hour-format: 12h
                              timezones:
                                - timezone: America/New_York
                                  label: Eastern

                    - name: Home
                      columns:
                        - size: small
                          widgets:
                            - type: calendar

                            - type: rss
                              limit: 10
                              collapse-after: 3
                              cache: 3h
                              feeds:
                                - url: https://justingarrison.com/index.xml
                                - url: https://a-cup-of.coffee/index.xml
                                  title: a cup of coffee
                                - url: https://samwho.dev/rss.xml
                                - url: https://blog.stonegarden.dev/index.xml
                                - url: https://ishadeed.com/feed.xml
                                  title: Ahmad Shadeed

                        - size: full
                          widgets:
                            - type: hacker-news

                            - type: videos
                              channels:
                                - UCXuqSBlHAE6Xw-yeJA0Tunw # Linus Tech Tips
                                - UCR-DXc1voovS8nhAvccRZhg # Jeff Geerling
                                - UCv6J_jJa8GJqFwQNgNrMuww # ServeTheHome
                                - UCOk-gHyjcWZNj3Br4oxwh0A # Techno Tim

                            - type: reddit
                              subreddit: selfhosted

                        - size: small
                          widgets:
                            - type: weather
                              location: Columbia, Maryland, United States

                            - type: markets
                              markets:
                                - symbol: BTC-USD
                                  name: Bitcoin
                                - symbol: NVDA
                                  name: NVIDIA
                                - symbol: AAPL
                                  name: Apple
                                - symbol: MSFT
                                  name: Microsoft
                                - symbol: GOOGL
                                  name: Google
                                - symbol: AMD
                                  name: AMD
                                - symbol: META
                                  name: Meta
